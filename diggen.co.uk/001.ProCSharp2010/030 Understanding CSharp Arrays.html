<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../csharp.css" />
    <link rel="stylesheet" type="text/css" href="../master.css" />
</head>
<body>
    <h1>
        Understanding C# Arrays</h1>
    <p>
        As I would guess you are already aware, an array is a set of data items, accessed
        using a numerical index. More specifically, an array is a set of contiguous data
        points of the same type (an array of ints, an array of strings, an array of SportsCars,
        and so on). Declaring an array with C# is quite straightforward. To illustrate,
        create a new Console Application project (named FunWithArrays) that contains a helper
        method named SimpleArrays(), invoked from within Main():</p>
    <p>
        Look closely at the previous code comments. When declaring a C# array using this
        syntax, the number used in the array declaration represents the total number of
        items, not the upper bound. Also note that the lower bound of an array always begins
        at 0. Thus, when you write int[] myInts = new int[3], you end up with an array holding
        three elements, indexed at positions 0, 1, 2.</p>
    <p>
        Once you have defined an array variable, you are then able to fill the elements
        index by index as shown in the updated SimpleArrays() method:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">class</span> Program
{
    <span class="kwrd">static</span> <span
        class="kwrd">void</span> Main(<span class="kwrd">string</span>[] args)
    {
        Console.WriteLine(<span
            class="str">"***** Fun with Arrays *****"</span>);
        SimpleArrays();
        Console.ReadLine();
    }

    <span
                class="kwrd">static</span> <span class="kwrd">void</span> SimpleArrays()
    {
        Console.WriteLine(<span
                    class="str">"=&gt; Simple Array Creation."</span>);
        <span class="rem">// Assign
                        an array of ints containing 3 elements {0, 1, 2}</span>
        <span class="kwrd">int</span>[] myInts = <span
                            class="kwrd">new</span> <span class="kwrd">int</span>[3];
    
        <span class="rem">//
                                Initialize a 100 item string array, indexed {0 - 99}</span>
        <span class="kwrd">string</span>[] booksOnDotNet = <span
                                    class="kwrd">new</span> <span class="kwrd">string</span>[100];
        Console.WriteLine();
    }
}</pre>
    <p>
        <b>Note</b> Do be aware that if you declare an array, but do not explicitly fill
        each index, each item will be set to the default value of the data type (e.g., an
        array of bools will be set to false or an array of ints will be set to 0).</p>
    <h2>
        C# Array Initialization Syntax</h2>
    <p>
        In addition to filling an array element by element, you are also able to fill the
        items of an array using C# array initialization syntax. To do so, specify each array
        item within the scope of curly brackets ({}). This syntax can be helpful when you
        are creating an array of a known size and wish to quickly specify the initial values.
        For example, consider the following alternative array declarations:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> SimpleArrays()
{
    Console.WriteLine(<span
        class="str">"=&gt; Simple Array Creation."</span>);
    <span class="rem">// Create
            and fill an array of 3 Integers</span>
    <span class="kwrd">int</span>[] myInts = <span
                class="kwrd">new</span> <span class="kwrd">int</span>[3];
    myInts[0] = 100;
    myInts[1] = 200;
    myInts[2] = 300;

    <span
                    class="rem">// Now print each value.</span>
    <span class="kwrd">foreach</span>(<span
                        class="kwrd">int</span> i <span class="kwrd">in</span> myInts)
        Console.WriteLine(i);
    Console.WriteLine();
}   </pre>
    <p>
        Notice that when you make use of this "curly bracket" syntax, you do not need to
        specify the size of the array (seen when constructing the stringArray variable),
        given that this will be inferred by the number of items within the scope of the
        curly brackets. Also notice that use of the new keyword is optional (shown when
        constructing the boolArray type).</p>
    <p>
        In the case of the intArray declaration, again recall the numeric value specified
        represents the number of elements in the array, not the value of the upper bound.
        If there is a mismatch between the declared size and the number of initializers,
        you are issued a compile-time error. The following is an example:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="rem">// OOPS! Mismatch of size and elements!</span>
<span
        class="kwrd">int</span>[] intArray = <span class="kwrd">new</span> <span class="kwrd">int</span>[2] { 20, 22, 23, 0 };</pre>
    <h2>
        Implicitly Typed Local Arrays</h2>
    <p>
        In the previous chapter, you learned about the topic of implicitly typed local variables.
        Recall that the var keyword allows you to define a variable, whose underlying type
        is determined by the compiler. In a similar vein, the var keyword can be used to
        define implicitly typed local arrays. Using this technique, you can allocate a new
        array variable without specifying the type contained within the array itself:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> DeclareImplicitArrays()
{
    Console.WriteLine(<span
        class="str">"=&gt; Implicit Array Initialization."</span>);
    
    <span class="rem">//
            a is really int[].</span>
    <span class="kwrd">var</span> a = <span class="kwrd">new</span>[] { 1, 10, 100, 1000 };
    Console.WriteLine(<span
                class="str">"a is a: {0}"</span>, a.ToString());

    <span class="rem">// b is really
                    double[].</span>
    <span class="kwrd">var</span> b = <span class="kwrd">new</span>[] { 1, 1.5, 2, 2.5 };
    Console.WriteLine(<span
                        class="str">"b is a: {0}"</span>, b.ToString());

    <span class="rem">// c is really
                            string[].</span>
    <span class="kwrd">var</span> c = <span class="kwrd">new</span>[] { <span
                                class="str">"hello"</span>, <span class="kwrd">null</span>, <span class="str">"world"</span> };
    Console.WriteLine(<span
                                    class="str">"c is a: {0}"</span>, c.ToString());
    Console.WriteLine();
}</pre>
    <p>
        Of course, just as when you allocate an array using explicit C# syntax, the items
        in the array's initialization list must be of the same underlying type (e.g., all
        ints, all strings, or all SportsCars). Unlike what you might be expecting, an implicitly
        typed local array does not default to System.Object; thus the following generates
        a compile-time error:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="rem">// Error! Mixed types!</span>
<span class="kwrd">var</span> d = <span
        class="kwrd">new</span>[] { 1, <span class="str">"one"</span>, 2, <span class="str">"two"</span>, <span
            class="kwrd">false</span> };</pre>
    <h2>
        Defining an Array of Objects</h2>
    <p>
        In most cases, when you define an array, you do so by specifying the explicitly
        type of item that can be within the array variable. While this seems quite straightforward,
        there is one notable twist. As you will come to understand in Chapter 6, System.Object
        is the ultimate base class to each and every type (including fundamental data types)
        in the .NET type system. Given this fact, if you were to define an array of objects,
        the subitems could be anything at all. Consider the following ArrayOfObjects() method
        (which again can be invoked from Main() for testing):</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> ArrayOfObjects()
{
    Console.WriteLine(<span
        class="str">"=&gt; Array of Objects."</span>);

    <span class="rem">// An array of
            objects can be anything at all.</span>
    <span class="kwrd">object</span>[] myObjects = <span
                class="kwrd">new</span> <span class="kwrd">object</span>[4];
    myObjects[0] = 10;
    myObjects[1] = <span
                    class="kwrd">false</span>;
    myObjects[2] = <span class="kwrd">new</span> DateTime(1969, 3, 24);
    myObjects[3] = <span
                        class="str">"Form &amp; Void"</span>;

    <span class="kwrd">foreach</span> (<span
                            class="kwrd">object</span> obj <span class="kwrd">in</span> myObjects)
    {
        <span
                                class="rem">// Print the type and value for each item in array.</span>
        Console.WriteLine(<span
                                    class="str">"Type: {0}, Value: {1}"</span>, obj.GetType(), obj);
    }
    Console.WriteLine();
}</pre>
    <p>
        Here, as you are iterating over the contents of myObjects, you print out the underlying
        type of each item using the GetType() method of System.Object as well as the value
        of the current item. Without going into too much detail regarding System.Object.GetType()
        at this point in the text, simply understand that this method can be used to obtain
        the fully qualified name of the item (Chapter 15 examines the topic of type information
        and reflection services in detail). The following output shows the result of calling
        ArrayOfObjects().</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
=&gt; Array of Objects.
Type: System.Int32, Value: 10
Type: System.Boolean, Value: False
Type: System.DateTime, Value: 3/24/1969 12:00:00 AM
Type: System.String, Value: Form &amp; Void</pre>
    <h2>
        Working with Multidimensional Arrays</h2>
    <p>
        In addition to the single-dimension arrays you have seen thus far, C# also supports
        two varieties of multidimensional arrays. The first of these is termed a rectangular
        array, which is simply an array of multiple dimensions, where each row is of the
        same length. To declare and fill a multidimensional rectangular array, proceed as
        follows:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> RectMultidimensionalArray()
{
    Console.WriteLine(<span
        class="str">"=&gt; Rectangular multidimensional array."</span>);
    <span class="rem">//
            A rectangular MD array.</span>
    <span class="kwrd">int</span>[,] myMatrix;
    myMatrix = <span
                class="kwrd">new</span> <span class="kwrd">int</span>[6,6];

    <span class="rem">//
                    Populate (6 * 6) array.</span>
    <span class="kwrd">for</span>(<span class="kwrd">int</span> i = 0; i &lt; 6; i++)
        <span
                        class="kwrd">for</span>(<span class="kwrd">int</span> j = 0; j &lt; 6; j++)
            myMatrix[i, j] = i * j;
    
    <span
                            class="rem">// Print (6 * 6) array.</span>
    <span class="kwrd">for</span>(<span
                                class="kwrd">int</span> i = 0; i &lt; 6; i++)
    {
        <span class="kwrd">for</span>(<span
                                    class="kwrd">int</span> j = 0; j &lt; 6; j++)
            Console.Write(myMatrix[i, j] + <span
                                        class="str">"\t"</span>);
        Console.WriteLine();
    }
    Console.WriteLine();
}   </pre>
    <p>
        The second type of multidimensional array is termed a jagged array. As the name
        implies, jagged arrays contain some number of inner arrays, each of which may have
        a unique upper limit, for example:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> JaggedMultidimensionalArray()
{
    Console.WriteLine(<span
        class="str">"=&gt; Jagged multidimensional array."</span>);
    <span class="rem">//
            A jagged MD array (i.e., an array of arrays).</span>
    <span class="rem">// Here we
                have an array of 5 different arrays.</span>
    <span class="kwrd">int</span>[][] myJagArray = <span
                    class="kwrd">new</span> <span class="kwrd">int</span>[5][];

    <span class="rem">//
                        Create the jagged array.</span>
    <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; myJagArray.Length; i++)
        myJagArray[i] = <span
                            class="kwrd">new</span> <span class="kwrd">int</span>[i + 7];
    
    <span class="rem">//
                                Print each row (remember, each element is defaulted to zero!)</span>
    <span class="kwrd">for</span>(<span
                                    class="kwrd">int</span> i = 0; i &lt; 5; i++)
    {
        <span class="kwrd">for</span>(<span
                                        class="kwrd">int</span> j = 0; j &lt; myJagArray[i].Length; j++)
            Console.Write(myJagArray[i][j] + <span
                                            class="str">" "</span>);
        Console.WriteLine();
    }
    Console.WriteLine();
}</pre>
    <p>
        Figure 4-2 shows the output of calling each of the RectMultidimensionalArray() and
        JaggedMultidimensionalArray() methods within Main().</p>
    <img src="../Images/Figure04_02.png" alt="Figure 4-2" />
    <h2>
        Arrays As Arguments or Return Values</h2>
    <p>
        Once you have created an array, you are free to pass it as an argument or receive
        it as a member return value. For example, the following PrintArray() method takes
        an incoming array of ints and prints each member to the console, while the GetStringArray()
        method populates an array of strings and returns it to the caller:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> PrintArray(<span
        class="kwrd">int</span>[] myInts)
{
    <span class="kwrd">for</span>(<span class="kwrd">int</span> i = 0; i &lt; myInts.Length; i++)
        Console.WriteLine(<span
            class="str">"Item {0} is {1}"</span>, i, myInts[i]);
}

<span class="kwrd">static</span> <span
                class="kwrd">string</span>[] GetStringArray()
{
    <span class="kwrd">string</span>[] theStrings = {<span
                    class="str">"Hello"</span>, <span class="str">"from"</span>, <span class="str">"GetStringArray"</span>};
    <span
                        class="kwrd">return</span> theStrings;
}</pre>
    <p>
        These methods may be invoked as you would expect:</p>
    <!-- code formatted by http://manoli.net/csharpformat/ -->
    <pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> PassAndReceiveArrays()
{
    Console.WriteLine(<span
        class="str">"=&gt; Arrays as params and return values."</span>);
    <span class="rem">//
            Pass array as parameter.</span>
    <span class="kwrd">int</span>[] ages = {20, 22, 23, 0} ;
    PrintArray(ages);

    <span
                class="rem">// Get array as return value.</span>
    <span class="kwrd">string</span>[] strs = GetStringArray();
    <span
                    class="kwrd">foreach</span>(<span class="kwrd">string</span> s <span class="kwrd">in</span> strs)
        Console.WriteLine(s);

    Console.WriteLine();
}</pre>
    <p>
        At this point, hopefully you feel comfortable with the process of defining, filling,
        and examining the contents of a C# array variable. To complete the picture, let's
        now examine the role of the System.Array cSystem.Array class.</p>
    <h2>
        The System.Array Base Class</h2>
    <p>
        Every array you create gathers much of its functionality from the System.Array class.
        Using these common members, you are able to operate on an array using a consistent
        object model. Table 4-2 gives a rundown of some of the more interesting members
        (be sure to check the .NET Framework 4.0 SDK documentation for full details).</p>
    <p>
        <b>Table 4-2.</b> Select Members of System.Array</p>
    <table class="gridtable">
        <tr>
            <th>
                Member of Array Class
            </th>
            <th>
                Meaning in Life
            </th>
        </tr>
        <tr>
            <td>
                Clear()
            </td>
            <td>
                This static method sets a range of elements in the array to empty values (0 for
                numbers, null for object references, false for booleans).
            </td>
        </tr>
        <tr>
            <td>
                CopyTo()
            </td>
            <td>
                This method is used to copy elements from the source array into the destination
                array.
            </td>
        </tr>
        <tr>
            <td>
                Length
            </td>
            <td>
                This property returns the number of items within the array.
            </td>
        </tr>
        <tr>
            <td>
                Rank
            </td>
            <td>
                This property returns the number of dimensions of the current array.
            </td>
        </tr>
        <tr>
            <td>
                Reverse()
            </td>
            <td>
                This static method reverses the contents of an one-dimensional array.
            </td>
        </tr>
        <tr>
            <td>
                Sort()
            </td>
            <td>
                This static method sorts a one-dimensional array of intrinsic types. If the elements
                in the array implement the IComparer interface, you can also sort your custom types
                (see Chapter 9).
            </td>
        </tr>
    </table>
    <p>Let's see some of these members in action. The following helper method makes use
        of the static Reverse() and Clear() methods to pump out information about an array
        of string types to the console:</p>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
<span class="kwrd">static</span> <span class="kwrd">void</span> SystemArrayFunctionality()
{
    Console.WriteLine(<span class="str">"=&gt; Working with System.Array."</span>);
    <span class="rem">// Initialize items at startup.</span>
    <span class="kwrd">string</span>[] gothicBands = {<span class="str">"Tones on Tail"</span>, <span class="str">"Bauhaus"</span>, <span class="str">"Sisters of Mercy"</span>};

    <span class="rem">// Print out names in declared order.</span>
    Console.WriteLine(<span class="str">"-&gt; Here is the array:"</span>);
    <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; gothicBands.Length; i++)
    {
        <span class="rem">// Print a name</span>
        Console.Write(gothicBands[i] + <span class="str">", "</span>);
    }
    Console.WriteLine(<span class="str">"\n"</span>);

    <span class="rem">// Reverse them...</span>
    Array.Reverse(gothicBands);
    Console.WriteLine(<span class="str">"-&gt; The reversed array"</span>);
    <span class="rem">// ... and print them.</span>
    <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; gothicBands.Length; i++)
    {
        <span class="rem">// Print a name</span>
        Console.Write(gothicBands[i] + <span class="str">", "</span>);
    }
    Console.WriteLine(<span class="str">"\n"</span>);

    <span class="rem">// Clear out all but the final member.</span>
    Console.WriteLine(<span class="str">"-&gt; Cleared out all but one..."</span>);
    Array.Clear(gothicBands, 1, 2);
    <span class="kwrd">for</span> (<span class="kwrd">int</span> i = 0; i &lt; gothicBands.Length; i++)
    {
        <span class="rem">// Print a name</span>
        Console.Write(gothicBands[i] + <span class="str">", "</span>);
    }
    Console.WriteLine();
}</pre>    
    <p>If you invoke this method from within Main(), you will get the output shown here.</p>
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
=&gt; Working with System.Array.
-&gt; Here is the array:
Tones on Tail, Bauhaus, Sisters of Mercy,

-&gt; The reversed array
Sisters of Mercy, Bauhaus, Tones on Tail,

-&gt; Cleared out all but one...
Sisters of Mercy, , ,</pre>
    <p>Notice that many members of System.Array are defined as static members and are therefore called
    at the class level (for example, the Array.Sort() or Array.Reverse() methods). Methods such as these
    are passed in the array you wish to process. Other methods of System.Array (such as the Length
    property) are bound at the object level, thus you are able to invoke the member directly on the array. </p>
</body>
</html>
